$(function(){App.init();Iframe.init()});
var width=$(".main-image").width(),height=$(".main-image").height(),slug=$("body").attr("project-slug"),slugClick="annotation_"+slug+"_click",App={init:function(){this.bind_events();var a=$("body").attr("id"),b=App.get_data("utils/get_assets.php/?f_id="+a);$.address.init(function(){b.then(function(c){App.render_page(c.data);c=$.address.hash();if(c.length===0)c="1";App.show_annotation(c)})}).change(function(){var c=$.address.hash();App.show_annotation(c)})},get_data:function(a){return $.getJSON(a)},
bind_events:function(){$(document).on("click",".description-btns .btn",function(a){App.annotation_cycle(a)});$(document).on("click",".dot",App.circle_click);$(document).on("click",".top-btn",App.back_to_top)},render_page:function(a){$("#annotation-template").html();var b=JST["templates/annotation.handlebars"];$("#main-content").html(b(a));a=$("body").attr("data-main-image");b=$("body").attr("data-credit");$(".annotated-image").attr("src",a);$(".credit").html(b);$("body").hasClass("standalone")&&$("#main-content").append("<hr>");
socialRiser.create()},show_annotation:function(a){if(a.length===0||a=="0")a="1";var b=$(".annotation.active"),c=$(".annotation[data-annotation="+a+"]"),d=$(".dot.active");a=$(".dot[data-annotation="+a+"]");b.removeClass("active");c.addClass("active");d.removeClass("active");a.addClass("active");$(window).resize()},annotation_cycle:function(a){var b=$(a.target);a=$(".annotation");var c=$(".annotation.active"),d;if(b.hasClass("next")||b.hasClass("glyphicon-menu-right")){d=c.next();d=d.length>0?d.data().annotation:
a.first().data().annotation}else if(b.hasClass("prev")||b.hasClass("glyphicon-menu-left")){d=c.prev();d=d.length>0?d.data().annotation:a.last().data().annotation}$.address.hash(d);window.countClicks(slugClick)},circle_click:function(){var a=$(this).data().annotation;$.address.hash(a);$(window).width()<500&&App.get_window_position(a);window.countClicks(slugClick)},get_window_position:function(){var a=$(".annotation-descriptions .annotation.active").offset().top;$(window).scrollTop(a)},back_to_top:function(){var a=
$("section.annotation-section").offset().top;$(window).scrollTop(a)}};$(window).scroll(function(){var a=$(window).scrollTop(),b=$("section.annotation-section").offset().top;if($(window).width()<500){a>b&&$(".backtotop").addClass("show-backtotop");a<b&&$(".backtotop").removeClass("show-backtotop")}else $(window).width()>=500&&$(".backtotop").removeClass("show-backtotop")});socialRiser.create({container:".social-links",networks:"facebook,twitter",text:document.title,url:".social_url",knockout:false});
